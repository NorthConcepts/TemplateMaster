
plugins {
    id 'java-library'
    id 'maven-publish'
}

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

archivesBaseName='NorthConcepts-TemplateMaster'.toLowerCase()

repositories {
    mavenLocal()
    mavenCentral()
    gradlePluginPortal()
}

compileJava {
    options.compilerArgs += ["-parameters", "-g:lines,vars,source"]
}

task packageJavadoc(type: Jar) {
    from javadoc
    archiveClassifier = 'javadoc'
}

task sourceJar(type: Jar) {
  archiveClassifier = 'sources'
  from sourceSets.main.allJava
}

publishing {
    publications {

        templatemaster(MavenPublication) {

            groupId = "${mavenTemplateMasterGroupId}"
            version = "${version}"
            artifactId = "${archivesBaseName}"

            from components.java
            artifact sourceJar
            artifact packageJavadoc
        }

    }

    repositories {
        maven {
            credentials {
                username "${mavenUser}"
                password "${mavenPassword}"
            }
            name = "${mavenTemplateMasterRepo}"
            url = "${mavenTemplateMasterUrl}"
        }
    }

}

dependencies {
    api 'org.freemarker:freemarker:2.3.33'
    api 'commons-codec:commons-codec:1.16.1'
    api 'org.jboss.resteasy:resteasy-core:6.2.8.Final'
    api 'jakarta.servlet:jakarta.servlet-api:6.0.0'
    api 'org.apache.logging.log4j:log4j-core:2.17.0'
    api 'org.jboss.resteasy:resteasy-jackson2-provider:6.2.7.Final'
    api 'com.fasterxml.jackson.core:jackson-databind:2.9.7'
    api 'org.springframework.data:spring-data-commons:2.1.2.RELEASE'
    api 'com.fasterxml.jackson.core:jackson-core:2.9.9'
    api 'org.apache.commons:commons-text:1.12.0'

    testImplementation 'junit:junit:4.12'
}

javadoc {
  source = sourceSets.main.allJava
  classpath = configurations.compileClasspath

  options {
    setMemberLevel JavadocMemberLevel.PUBLIC
    setAuthor true

    links "https://docs.oracle.com/javase/8/docs/api/"
  }
}

